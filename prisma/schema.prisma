generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  userid          String   @id @default(cuid())
  name            String
  email           String   @unique
  phoneNumber     String
  password        String
  dateOfBirth     DateTime
  city            String
  state           String
  gender          String
  institution     String
  isKiitStudent   Boolean  @default(false)
  rollNumber      String?
  isEmailVerified Boolean  @default(false)
  merchandise     Boolean  @default(false)
  accomodation    Boolean  @default(false)
  payment         Boolean  @default(false)
  createdAt       DateTime @default(now())
  issues          Issue[]
  cart            CartItem[]
  eventIds        String[]
}

// onetoone relation with user cart

model CartItem {
  eventId     Int    @id @default(autoincrement())
  eventName   String
  eventCode   String 
  redirectUrl String
  imageUrl    String
  userId      String
  user        User   @relation(fields: [userId], references: [userid])
}

model DefaultEvent {
  eventId          Int    @id @default(autoincrement())
  eventName        String
  eventCode        String @unique
  eventDescription String
  school           String
  type             String
  category         String
  prizeMoney       String
}

model Issue {
  issue_id  String   @id @default(uuid())
  issue     String
  createdAt DateTime @default(now())
  resolved  Boolean
  user      User?    @relation(fields: [issue_id], references: [userid])
}
